version: "{build}"
image: 
  - Visual Studio 2015
  - Visual Studio 2013

build_script: 
  - git submodule update --init --recursive
  - if "%APPVEYOR_BUILD_WORKER_IMAGE%" == "Visual Studio 2017" (call "C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Auxiliary\Build\vcvarsall.bat" amd64)
  - if "%APPVEYOR_BUILD_WORKER_IMAGE%" == "Visual Studio 2015" (call "C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\vcvarsall.bat" amd64)
  - if "%APPVEYOR_BUILD_WORKER_IMAGE%" == "Visual Studio 2013" (call "C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\vcvarsall.bat" amd64)
  - if "%APPVEYOR_BUILD_WORKER_IMAGE%" == "Visual Studio 2017" (set GYP_MSVS_VERSION=2017)
  - if "%APPVEYOR_BUILD_WORKER_IMAGE%" == "Visual Studio 2015" (set GYP_MSVS_VERSION=2015)
  - if "%APPVEYOR_BUILD_WORKER_IMAGE%" == "Visual Studio 2013" (set GYP_MSVS_VERSION=2013)
  - call build.cmd